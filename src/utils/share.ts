// src/utils/share.ts

// 利用可能なSNSプラットフォームを型として定義
export type SocialPlatform = 'twitter' | 'facebook' | 'line' | 'linkedin' | 'pinterest' | 'hatena';

/**
 * ソーシャルメディア共有用のURLを生成する関数
 * @param platform - 共有先のSNSプラットフォーム
 * @param url - 共有するURL
 * @param text - 共有時のテキスト
 * @param title - 共有時のタイトル
 * @returns 共有用のURL
 */
export function getShareUrl(
    platform: SocialPlatform,
    url: string,
    text: string = '',
    title: string = ''
): string {
    const encodedUrl = encodeURIComponent(url);
    const encodedText = encodeURIComponent(text);
    const encodedTitle = encodeURIComponent(title);

    switch (platform) {
        case 'twitter':
            return `https://twitter.com/intent/tweet?url=${encodedUrl}&text=${encodedText}`;
        case 'facebook':
            return `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;
        case 'line':
            return `https://social-plugins.line.me/lineit/share?url=${encodedUrl}`;
        case 'linkedin':
            return `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`;
        case 'pinterest':
            return `https://pinterest.com/pin/create/button/?url=${encodedUrl}&description=${encodedText}`;
        case 'hatena':
            // はてなブックマークの正しいURL形式に修正
            return `https://b.hatena.ne.jp/add?mode=confirm&url=${encodedUrl}&title=${encodedTitle}`;
        default:
            // 型システムによりここに到達することはないはず
            return '#';
    }
}

/**
 * プラットフォーム設定の型定義
 */
export interface PlatformConfig {
    icon: string;
    color: string;
    label: string;
}

/**
 * プラットフォーム設定のマップ型
 */
export type PlatformConfigMap = {
    [key in SocialPlatform]: PlatformConfig;
};

/**
 * SNSプラットフォームごとの設定
 */
export const platformConfig: PlatformConfigMap = {
    twitter: {
        icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16-1.9 1.47-4.3 2.35-6.9 2.35-.45 0-.9-.03-1.33-.08 2.46 1.56 5.37 2.5 8.5 2.5 10.2 0 15.75-8.42 15.75-15.75 0-.23 0-.47-.02-.7.9-.63 1.58-1.4 2.17-2.3z"/></svg>',
        color: '#1DA1F2',
        label: 'Twitterでシェア'
    },
    facebook: {
        icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg>',
        color: '#3b5998',
        label: 'Facebookでシェア'
    },
    line: {
        icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19.365 9.89c.50 0 .906.41.906.91s-.406.91-.906.91H17.59v1.5h1.775c.5 0 .906.41.906.91s-.406.91-.906.91H16.7c-.5 0-.906-.41-.906-.91v-1.5-1.82c0-.5.407-.91.906-.91h2.665zm-6.514 1.82h1.905c.5 0 .906.41.906.91s-.406.91-.906.91h-1.905c-.5 0-.906-.41-.906-.91s.407-.91.906-.91zm-3.678-1.82c.5 0 .906.41.906.91v2.73c0 .5-.406.91-.906.91s-.906-.41-.906-.91v-2.73c0-.5.407-.91.906-.91zm-2.466 0c.5 0 .906.41.906.91v2.73c0 .5-.406.91-.906.91H4.997c-.5 0-.906-.41-.906-.91v-2.73c0-.5.407-.91.906-.91h1.71zM24 10c0 5.5-5.597 9.97-12.5 9.97-6.902 0-12.5-4.47-12.5-9.97C-1 4.5 4.598 0 11.5 0 18.403 0 24 4.5 24 10z"/></svg>',
        color: '#00B900',
        label: 'LINEでシェア'
    },
    linkedin: {
        icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg>',
        color: '#0077b5',
        label: 'LinkedInでシェア'
    },
    pinterest: {
        icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.627 0-12 5.372-12 12 0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146 1.124.347 2.317.535 3.554.535 6.627 0 12-5.373 12-12s-5.373-12-12-12z"/></svg>',
        color: '#E60023',
        label: 'Pinterestでシェア'
    },
    hatena: {
        // はてなブックマークの公式SVGパスに修正
        icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 64 64" fill="currentColor"><path d="M 36.164062 33.554688 C 34.988281 32.234375 33.347656 31.5 31.253906 31.34375 C 33.125 30.835938 34.476562 30.09375 35.335938 29.09375 C 36.191406 28.09375 36.609375 26.78125 36.609375 25.101562 C 36.628906 23.875 36.332031 22.660156 35.75 21.578125 C 35.160156 20.558594 34.292969 19.71875 33.253906 19.160156 C 32.304688 18.640625 31.175781 18.265625 29.847656 18.042969 C 28.523438 17.824219 26.195312 17.730469 22.867188 17.730469 L 14.769531 17.730469 L 14.769531 47.269531 L 23.113281 47.269531 C 26.46875 47.269531 28.886719 47.15625 30.367188 46.929688 C 31.851562 46.695312 33.085938 46.304688 34.085938 45.773438 C 35.289062 45.148438 36.28125 44.179688 36.933594 42.992188 C 37.597656 41.796875 37.933594 40.402344 37.933594 38.816406 C 37.933594 36.621094 37.347656 34.867188 36.164062 33.554688 Z M 22.257812 24.269531 L 23.984375 24.269531 C 25.988281 24.269531 27.332031 24.496094 28.015625 24.945312 C 28.703125 25.402344 29.042969 26.183594 29.042969 27.285156 C 29.042969 28.390625 28.664062 29.105469 27.9375 29.550781 C 27.210938 29.992188 25.84375 30.199219 23.855469 30.199219 L 22.257812 30.199219 Z M 29.121094 41.210938 C 28.328125 41.691406 26.976562 41.925781 25.078125 41.925781 L 22.257812 41.925781 L 22.257812 35.488281 L 25.195312 35.488281 C 27.144531 35.488281 28.496094 35.738281 29.210938 36.230469 C 29.925781 36.726562 30.304688 37.582031 30.304688 38.832031 C 30.304688 40.078125 29.914062 40.742188 29.105469 41.222656 Z M 29.121094 41.210938 M 46.488281 39.792969 C 44.421875 39.792969 42.742188 41.46875 42.742188 43.535156 C 42.742188 45.605469 44.421875 47.28125 46.488281 47.28125 C 48.554688 47.28125 50.230469 45.605469 50.230469 43.535156 C 50.230469 41.46875 48.554688 39.792969 46.488281 39.792969 Z M 46.488281 39.792969 M 43.238281 17.730469 L 49.738281 17.730469 L 49.738281 37.429688 L 43.238281 37.429688 Z M 43.238281 17.730469 "/></svg>',
        color: '#00A4DE',
        label: 'はてなブックマークに追加'
    }
};
