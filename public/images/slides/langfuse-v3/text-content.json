[
  "Langfuse v3 使ってますか？\nL a n g f u s e\n2 0 2 5\nLangfuse\nNight #1\nY U   O T S U B O",
  "ABOUT ME\nY\nu\n \nO\nt\ns\nu\nb\no\nゆるふわエンジニア\nK\nD\nD\nI\nアジャイル開発センター所属\n生成\nA\nI\nを活用したプロジェクトでゆるふわエンジニア\n妻と犬と細々暮らしている\nちなみに、志田未来さんと神木隆之介さん\nそれぞれが生まれた誕生日の間に生まれている",
  "",
  "L\na\nn\ng\nf\nu\ns\ne\n \nv\n3",
  "L\na\nn\ng\nf\nu\ns\ne\n \nC\nl\no\nu\nd\n版\n挙手お願いします\n\n\u0000",
  "L\na\nn\ng\nf\nu\ns\ne\nセルフホステッド版\n挙手お願いします\n\n\u0000",
  "L\na\nn\ng\nf\nu\ns\ne\nセルフホステッド版で\nV\n3\n挙手お願いします\n\n\u0000",
  "大幅にアーキテクチャが変わったことで話題でした。\nマイグレーションにチャレンジした方も多いのではないでしょうか？\nSTABLE RELEASE ON 12/9/2024.\nLangfuse v3",
  "V3 どんなイメージですか...?",
  "今日の\nL\nT\nを見て",
  "アップデートでどんなことが\n変わったのでしょうか？\nその前にLangfuse\nV3の特徴\nA\ns\ny\nn\nc\n \nW\no\nr\nk\ne\nr\nO\nL\nA\nP\n(\nC\nl\ni\nc\nk\nh\no\nu\ns\ne\n)\nQ\nu\ne\nu\ni\nn\ng\nW\ne\nb\nサーバーの\n重たい処理を\n非同期で処理\n分散トレーシングという\n重たい分析\nワークロードを解決\nA\ns\ny\nn\nc\n \nW\no\nr\nk\ne\nr\nと\nW\ne\nb\nサーバーの間を\n安全に受け持つ",
  "アップデートでどんなことが\n変わったのでしょうか？\nその前にLangfuse\nV3の特徴\nA\ns\ny\nn\nc\n \nW\no\nr\nk\ne\nr\nO\nL\nA\nP\n(\nC\nl\ni\nc\nk\nh\no\nu\ns\ne\n)\nQ\nu\ne\nu\ni\nn\ng\nW\ne\nb\nサーバーの重たい処\n理を非同期で処理\n分散トレーシングという\n重たい分析ワークロード\nを解決\nA\ns\ny\nn\nc\n \nW\no\nr\nk\ne\nr\nと\nW\ne\nb\nサ\nーバーの間を安全に受け\n持つ\n詳しくはBlogを\n読んでね！",
  "",
  "",
  "v2\nAWS App Runner\nAmazon Aurora\nServerless v2\nシンプルさ\nインフラコスト\n可用性\nA\nW\nS\n \nA\np\np\n \nR\nu\nn\nn\ne\nr\nと\nA\nu\nr\no\nr\na\n構成\nL\na\nn\ng\nf\nu\ns\ne\nは\nN\ne\nx\nt\n.\nj\ns\nで動いているので\nA\np\np\n \nR\nu\nn\nn\ne\nr\nでリクエストベースでの\n課金が実現できます。\n我々の\nV\n2\n構成はこれだ！\nまずはじめに",
  "v3に移行するに\nあたって\n右の\n4\nつを重要項目として\nV\n3\n切り替えを目指します。\n会社の\nM\ni\ns\ns\ni\no\nn\n/\nV\ni\ns\ni\no\nn\n/\nV\na\nl\nu\ne\nみたい\n.\n.\n.\nデータは今運用しているものを\n消さずに\nV\n3\nになったからと言って大幅にコスト\nアップは許されない\n面倒な手順書は作成したくない\nI\na\nC\nでパッと華麗に\nできるだけダウンタイムは少なくしたい\nK\ne\ne\np\n \nD\na\nt\na\nR\ne\nd\nu\nc\ne\n \nt\nh\ne\n \nC\no\ns\nt\nE\na\ns\ny\n \nD\ne\np\nl\no\ny\nM\ni\nn\ni\nm\nu\nm\n \nD\no\nw\nn\nt\ni\nm\ne",
  "v2\nAWS App Runner\nAmazon Aurora\nServerless v2\n現行動いている構成の\nA\nu\nr\no\nr\na\nは消したり、\n移行したりせずそのまま放置する。\n念の為作業前にスナップショットを取って\nおく。\n(\n保険は重要\n)\nP\no\ns\nt\ng\nr\ne\nS\nQ\nL\nのインスタンスは\nそのままに\nKeep Data",
  "万が一の\nv\n3\n→\nv\n2\n切り戻しに備えて、\nバージョンアップで走る\nP\no\ns\nt\ng\nr\ne\nS\nQ\nL\nに対\nしての\nP\nr\ni\ns\nm\na\n \nM\ni\ng\nr\na\nt\ni\no\nn\nについて注意。\nd\no\nw\nn\n.\ns\nq\nl\nは\nL\na\nn\ng\nf\nu\ns\ne\nプロジェクトで\n未作成なので、\n万が一のときは手動でダウンマイグレーシ\nョンを実行する必要がある。\nD\nB\nマイグレーションに注意\nKeep Data",
  "あまりおすすめされないが、万が一のとき\nは\nP\no\ns\nt\ng\nr\ne\nS\nQ\nL\nのテーブルに対して操作が\n必要なため\nダウンマイグレーションの際\nC\nl\ni\nc\nk\nh\no\nu\ns\ne\nへのバックグラウンドマイ\nグレーションを強制実行したい場合\nA\nu\nr\no\nr\na\nのクエリエディタを有効化\nしておく\nKeep Data",
  "A\ns\ny\nn\nc\n \nw\no\nr\nk\ne\nr\n単体で動くことはないので\n(\nQ\nu\ne\nu\ne\nにジョブ登録されるまで動かない\n)\n一気に裏側を作成し、\n最後に\nW\ne\nb\n \nS\ne\nr\nv\ne\nr\nの\nv\n3\nバージョンアップ\nを実施し\nv\n3\nに変更する。\nA\np\np\n \nR\nu\nn\nn\ne\nr\nの自動デプロイを賢く使って\n公式の\nM\ni\ng\nr\na\nt\ni\no\nn\n \nG\nu\ni\nd\ne\nを少しだけ簡易化\nさせた方法です。\nW\ne\nb\nサーバー以外を\nすべて新規作成し、\n最後に\nv\n3\nに上げる\nMinimum Downtime\n新規作成\nv2のまま放置\nv3\n手を付けず",
  "不測のことはつきものなのでアプリケーシ\nョン全体をメンテナンスにしてしまう。\nビジネス部門との調整に難航する場合は、\nv\n3\n化によるスケーラビリティを説明すると\nよい。\nそれでも不安なら\n夜間メンテにしてしまう\nMinimum Downtime",
  "単純な\nA\nW\nS\n費用だけでなく、\n運用コスト含めて考えるとできるだけマネージドな\nサービスを活用するとよい。\nQ\nu\ne\nu\ne\n \n→\n \nE\nl\na\ns\nt\ni\nC\na\nc\nh\ne\n(\nR\ne\nd\ni\ns\n)\nA\ns\ny\nn\nc\n \nW\no\nr\nk\ne\nr\n \n/\n \nC\nl\ni\nc\nk\nh\no\nu\ns\ne\n→\n \nE\nC\nS\n \n(\nF\na\nr\ng\na\nt\ne\n)\nC\nl\ni\nc\nk\nh\no\nu\ns\ne\nの永続化\n \n→\n \nE\nF\nS\nB\nl\no\nb\n \nS\nt\no\nr\na\ng\ne\n \n→\n \nS\n3\n可能な限りマネージドに\nReduce the Cost\nLangfuse Worker\nClickhouse\nService\nService\nContainer\nAmazon\n  \nECS Cluster\nContainer\nAmazon EFS\nAWS App Runner\nAmazon Aurora Serverless V2\nAmazon ElastiCache\nAmazon S3",
  "さらにコストを抑えたい場合、\nFargate Spot\nで\nAsync Worker\nを実行\nする\n(※1)\nRedis\nの代わりに\nValkey\nを使う\nEFS\nの\none-zone\nにする\n(※2)\n(\n開発環境\n)Schedule\nで落とす\nなどが検討できる\nFargate Spot\nや\nValkey\n、\nEFS\none-zone\nのことも考えてみる\nReduce the Cost\n※1: \n最悪\nRedis\nに\nQueue\nが貯まるので、\nLangfuse\n画面上に反映が遅延することも\n※2: Clickhouse\nのコンテナの\nAZ\nと揃える必要がある。揃えないで立ち上げると\nProvisioning\nで落ちる",
  "どれくらいコス\nト変わるのか\nv2\nと比べ\n+$40\nは痛いですが、\n抑えようと思えば\n$100\nくらい\nは圧縮できる\nV3 \nお得構成\nV2\nV3 \nちゃんとした構成\n$60\n$196\n$100\nv2\n構成に加えて\nElastiCache\n(Valkey cache.t2.micro)\nEFS One Zone\nFargate Spot2\n台\nApp Runner\n(1 vCPU & 2 GB)\nで日勤帯のみアプリ利用想定\nAurora Serveless v2\n(0.5ACU\nで稼働想定\n)\nFargate Spot→Fargate\nEFS\nを\nStandard\nに\nちゃんと作るならこっち\n約\n約\n約",
  "ここまで説明してきたことを、\nT\ne\nr\nr\na\nf\no\nr\nm\nで一発で適用できたら嬉しい。\nそんな願いを叶えるモジュールがある。\nすべては\nT\ne\nr\nr\na\nf\no\nr\nm\n \na\np\np\nl\ny\nで\nEasy Deploy",
  "なのでご安心を",
  "どんなイメージですか...?",
  "どんなイメージですか...?",
  "最後に",
  "Langfuse\nセルフホステッド版\nと向き合うには\nO\nS\nS\nのコードを読むことでトラブルシュートもできるし、\n趣深い改修が入っていることもわかる。\nコードを読もう！ \nO\nS\nS\nという特性を活かして\nJ\nu\ns\nt\n \nR\ne\na\nd\n \ni\nt\n!\n!\n!\n最高のドキュメントはコードです！\n(\n持論\n)\nでも一人で読むのはツライので\n皆さん情報共有しましょう！ﾀｽｹﾃ\n.\n.\n.\n.\n.",
  "THANK YOU\nF O\nR   W\nA T C\nH I N\nG"
]